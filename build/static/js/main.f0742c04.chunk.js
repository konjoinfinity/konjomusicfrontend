(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){e.exports=n(58)},34:function(e,t,n){},54:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(25),l=n.n(s),c=n(63),r=(n(34),n(12)),i=n(3),u=n(4),h=n(6),m=n(5),p=n(7),d=n(2),g=n(60),b=n(64),E=n(61),f=n(62),j=n(13),y=n.n(j),O=(n(54),function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e;return this.props.songs&&(e=this.props.songs.map(function(e,t){return o.a.createElement("div",{className:"song card mt-3",key:t},o.a.createElement("div",{className:"card-body"},o.a.createElement("p",null,o.a.createElement(g.a,{to:"/songs/"+e._id},o.a.createElement("button",{className:"btn btn-success"},e.title," - ",e.author)))))})),!0===this.props.isLoggedIn&&o.a.createElement("div",null,o.a.createElement("h1",null,"Songs"),e)}}]),t}(a.Component)),v=function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return!0===this.props.isLoggedIn&&o.a.createElement("div",{className:"card m-5"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h1",null,"Konjo Music"),o.a.createElement("p",null,"Konjo enjoys writing music.")))}}]),t}(a.Component),I=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={song:null,comment:null},n.deleteComment=n.deleteComment.bind(Object(d.a)(Object(d.a)(n))),n.deleteSong=n.deleteSong.bind(Object(d.a)(Object(d.a)(n))),n.handleInputChange=n.handleInputChange.bind(Object(d.a)(Object(d.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(Object(d.a)(n))),n.handleComment=n.handleComment.bind(Object(d.a)(Object(d.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://konjomusicbackend.herokuapp.com/songs/".concat(this.props.match.params.id)).then(function(e){return e.json()}).then(function(t){e.setState({song:t})})}},{key:"deleteSong",value:function(e){var t=this;e.preventDefault(),fetch("http://konjomusicbackend.herokuapp.com/songs/".concat(this.state.song._id),{method:"DELETE"}).then(this.props.history.push("/songs")).finally(function(){return t.props.getSongs()})}},{key:"handleComment",value:function(){var e=this;fetch("http://konjomusicbackend.herokuapp.com/songs/".concat(this.props.match.params.id)).then(function(e){return e.json()}).then(function(t){e.setState({song:t})})}},{key:"deleteComment",value:function(e){y.a.put("http://konjomusicbackend.herokuapp.com/songs/".concat(this.state.song._id,"/delete"),{body:e.target.dataset.id}).then(function(e){return console.log(e)}).then(function(e){console.log(e)}),this.componentDidMount(),this.props.history.push("/songs/".concat(this.props.match.params.id,"/"))}},{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(r.a)({},a,n))}},{key:"handleSubmit",value:function(e){console.log(e),y.a.put("http://konjomusicbackend.herokuapp.com/songs/".concat(this.props.match.params.id,"/comment"),{comment:this.state.comment}).then(function(e){return console.log(e)}).then(function(e){console.log(e)}),this.componentDidMount(),this.props.history.push("/songs/".concat(this.state.song._id,"/"))}},{key:"render",value:function(){var e=this;return!0===this.props.isLoggedIn&&o.a.createElement("div",{className:"conatiner"},o.a.createElement("div",{className:"song card m-5"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h1",null,this.state.song&&this.state.song.title),o.a.createElement("h2",null,"Author: ",this.state.song&&this.state.song.author),o.a.createElement("p",null,"Notes: ",this.state.song&&this.state.song.notes),o.a.createElement("p",null,"Lyrics: ",this.state.song&&this.state.song.lyrics),o.a.createElement("p",null,o.a.createElement(g.a,{to:"/songs/".concat(this.props.match.params.id,"/edit")},o.a.createElement("button",{className:"btn btn-primary"},"Edit"))),o.a.createElement("form",{onSubmit:this.deleteSong},o.a.createElement("button",{className:"btn btn-danger"},"Delete")))),o.a.createElement("div",{className:"song card m-5"},o.a.createElement("div",{className:"card-body"},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("p",null,o.a.createElement("input",{id:"comment",name:"comment",type:"text",onChange:this.handleInputChange})),o.a.createElement("p",null,o.a.createElement("button",{className:"btn btn-primary"},"Comment"))))),this.state.song&&this.state.song.comments.map(function(t,n){return o.a.createElement("div",{className:"song card m-5",key:n},o.a.createElement("div",{className:"card-body"},o.a.createElement("p",null,t.text),o.a.createElement("form",{"data-id":t._id,onSubmit:e.deleteComment},o.a.createElement("button",{className:"btn btn-danger"},"Delete"))))}))}}]),t}(a.Component),k=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={title:null,author:null,notes:null,lyrics:null},n.handleInputChange=n.handleInputChange.bind(Object(d.a)(Object(d.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(Object(d.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://konjomusicbackend.herokuapp.com/songs/".concat(this.props.match.params.id)).then(function(e){return e.json()}).then(function(t){e.setState({song:t})})}},{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(r.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state;fetch("http://konjomusicbackend.herokuapp.com/songs/".concat(this.props.match.params.id),{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){t.props.history.push("/songs/".concat(t.props.match.params.id)),console.log(e)}).finally(function(){return t.props.getSongs()})}},{key:"render",value:function(){return!0===this.props.isLoggedIn&&o.a.createElement("div",{className:"card m-5"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h1",null,"Edit Song"),o.a.createElement("form",{onSubmit:this.handleSubmit,action:"/songs"},o.a.createElement("p",null,"Title "),o.a.createElement("p",null,o.a.createElement("input",{id:"title",name:"title",type:"text",placeholder:this.state.song&&this.state.song.title,onChange:this.handleInputChange})),o.a.createElement("p",null,"Author "),o.a.createElement("p",null,o.a.createElement("input",{id:"author",name:"author",type:"text",placeholder:this.state.song&&this.state.song.author,onChange:this.handleInputChange})),o.a.createElement("p",null,"Notes "),o.a.createElement("p",null,o.a.createElement("input",{id:"notes",name:"notes",type:"text",placeholder:this.state.song&&this.state.song.notes,onChange:this.handleInputChange})),o.a.createElement("p",null,"Lyrics "),o.a.createElement("p",null,o.a.createElement("textarea",{id:"lyrics",name:"lyrics",type:"text",rows:"8",cols:"48",placeholder:this.state.song&&this.state.song.lyrics,onChange:this.handleInputChange})),o.a.createElement("p",null,o.a.createElement("button",{className:"btn btn-primary"},"Edit Song")))))}}]),t}(a.Component),S=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={title:"",author:"",notes:"",lyrics:""},n.handleSubmit=n.handleSubmit.bind(Object(d.a)(Object(d.a)(n))),n.handleInputChange=n.handleInputChange.bind(Object(d.a)(Object(d.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(r.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this,n=this.state;console.log(e),fetch("http://konjomusicbackend.herokuapp.com/songs",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){t.props.history.push("/songs"),console.log(e)}).finally(function(){return t.props.getSongs()})}},{key:"render",value:function(){return!0===this.props.isLoggedIn&&o.a.createElement("div",{className:"card m-5"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h1",null,"Create New Song"),o.a.createElement("form",{onSubmit:this.handleSubmit,action:"/songs"},o.a.createElement("p",null,"Title "),o.a.createElement("p",null,o.a.createElement("input",{id:"title",name:"title",type:"text",onChange:this.handleInputChange})),o.a.createElement("p",null,"Author "),o.a.createElement("p",null,o.a.createElement("input",{id:"author",name:"author",type:"text",onChange:this.handleInputChange})),o.a.createElement("p",null,"Notes "),o.a.createElement("p",null,o.a.createElement("input",{id:"notes",name:"notes",type:"text",onChange:this.handleInputChange})),o.a.createElement("p",null,"Lyrics "),o.a.createElement("p",null,o.a.createElement("textarea",{id:"lyrics",name:"lyrics",type:"text",rows:"8",cols:"48",onChange:this.handleInputChange})),o.a.createElement("p",null,o.a.createElement("button",{className:"btn btn-success"},"Create Song")))))}}]),t}(a.Component),L=function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return!1===this.props.isLoggedIn&&o.a.createElement("div",{className:"card m-5"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h2",null,"Sign Up"),o.a.createElement("form",null,o.a.createElement("div",null,o.a.createElement("p",null,"Email"),o.a.createElement("p",null,o.a.createElement("input",{type:"text",name:"email",onChange:this.props.handleInput}))),o.a.createElement("div",null,o.a.createElement("p",null,"Password"),o.a.createElement("p",null,o.a.createElement("input",{type:"password",name:"password",onChange:this.props.handleInput}))),o.a.createElement("button",{className:"btn btn-success",type:"submit",onClick:this.props.handleSignUp},"Sign Up"))))}}]),t}(a.Component),C=function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return!1===this.props.isLoggedIn&&o.a.createElement("div",{className:"card m-5"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h2",null,"Log In"),o.a.createElement("form",null,o.a.createElement("div",null,o.a.createElement("p",null,"Email"),o.a.createElement("p",null,o.a.createElement("input",{type:"text",name:"email",onChange:this.props.handleInput}))),o.a.createElement("div",null,o.a.createElement("p",null,"Password"),o.a.createElement("p",null,o.a.createElement("input",{type:"password",name:"password",onChange:this.props.handleInput}))),o.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:this.props.handleLogIn},"Log In"))))}}]),t}(a.Component),N=function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return!0===this.props.isLoggedIn&&o.a.createElement("div",{className:"card m-5"},o.a.createElement("div",{className:"card-body"},o.a.createElement("form",null,o.a.createElement("button",{className:"btn btn-warning",type:"submit",onClick:this.props.handleLogOut},o.a.createElement("h2",null,"Log Out")))))}}]),t}(a.Component),w=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={songs:"",email:"",password:"",isLoggedIn:!1},n.getSongs=n.getSongs.bind(Object(d.a)(Object(d.a)(n))),n.handleLogOut=n.handleLogOut.bind(Object(d.a)(Object(d.a)(n))),n.handleInput=n.handleInput.bind(Object(d.a)(Object(d.a)(n))),n.handleLogIn=n.handleLogIn.bind(Object(d.a)(Object(d.a)(n))),n.handleSignUp=n.handleSignUp.bind(Object(d.a)(Object(d.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getSongs",value:function(){var e=this;fetch("http://konjomusicbackend.herokuapp.com/songs").then(function(e){return e.json()}).then(function(t){e.setState({songs:t})})}},{key:"componentDidMount",value:function(){this.getSongs(),localStorage.token?this.setState({isLoggedIn:!0}):this.setState({isLoggedIn:!1})}},{key:"handleLogOut",value:function(e){e.preventDefault(),this.setState({email:"",password:"",isLoggedIn:!1}),localStorage.clear(),console.log("User has been logged out"),this.props.history.push("/login")}},{key:"handleInput",value:function(e){this.setState(Object(r.a)({},e.target.name,e.target.value))}},{key:"handleSignUp",value:function(e){var t=this;e.preventDefault(),y.a.post("http://konjomusicbackend.herokuapp.com/users/signup",{email:this.state.email,password:this.state.password}).then(function(e){localStorage.token=e.data.token,t.setState({isLoggedIn:!0}),console.log("User has signed up"),t.props.history.push("/songs")}).catch(function(e){return console.log(e)})}},{key:"handleLogIn",value:function(e){var t=this;e.preventDefault(),y.a.post("http://konjomusicbackend.herokuapp.com/users/login",{email:this.state.email,password:this.state.password}).then(function(e){localStorage.token=e.data.token,t.setState({isLoggedIn:!0}),console.log("User is logged in"),t.props.history.push("/songs")}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("nav",null,o.a.createElement("img",{src:"https://konjoinfinity.github.io/img/logo.png",alt:"Konjo"}),!0===this.state.isLoggedIn&&o.a.createElement(g.a,{to:"/songs"},o.a.createElement("h2",null,"Home")),!0===this.state.isLoggedIn&&o.a.createElement(g.a,{to:"/about"},o.a.createElement("h2",null,"About")),!0===this.state.isLoggedIn&&o.a.createElement(g.a,{to:"/new"},o.a.createElement("h2",null,"New")),!1===this.state.isLoggedIn&&o.a.createElement(g.a,{to:"/login"},o.a.createElement("h2",null,"Login")),!1===this.state.isLoggedIn&&o.a.createElement(g.a,{to:"/signup"},o.a.createElement("h2",null,"Sign Up")),!0===this.state.isLoggedIn&&o.a.createElement(g.a,{to:"/logout"},o.a.createElement("h2",null,"Logout"))),o.a.createElement("main",{className:"container"},o.a.createElement(b.a,null,o.a.createElement(E.a,{path:"/",exact:!0,render:function(t){return o.a.createElement(O,Object.assign({},t,{songs:e.state.songs,isLoggedIn:e.state.isLoggedIn}))}}),o.a.createElement(E.a,{path:"/songs",exact:!0,render:function(t){return o.a.createElement(O,Object.assign({},t,{songs:e.state.songs,isLoggedIn:e.state.isLoggedIn}))}}),o.a.createElement(E.a,{path:"/about",render:function(){return o.a.createElement(v,{isLoggedIn:e.state.isLoggedIn})}}),o.a.createElement(E.a,{path:"/new",exact:!0,render:function(t){return o.a.createElement(S,Object.assign({},t,{getSongs:e.getSongs,isLoggedIn:e.state.isLoggedIn}))}}),o.a.createElement(E.a,{path:"/songs/:id",exact:!0,render:function(t){return o.a.createElement(I,Object.assign({},t,{songs:e.state.songs,getSongs:e.getSongs,isLoggedIn:e.state.isLoggedIn}))}}),o.a.createElement(E.a,{path:"/songs/:id/edit",render:function(t){return o.a.createElement(k,Object.assign({},t,{getSongs:e.getSongs,isLoggedIn:e.state.isLoggedIn}))}}),o.a.createElement(E.a,{path:"/signup",render:function(t){return o.a.createElement(L,{isLoggedIn:e.state.isLoggedIn,handleInput:e.handleInput,handleSignUp:e.handleSignUp})}}),o.a.createElement(E.a,{path:"/logout",render:function(t){return o.a.createElement(N,{isLoggedIn:e.state.isLoggedIn,handleLogOut:e.handleLogOut})}}),o.a.createElement(E.a,{path:"/login",render:function(t){return o.a.createElement(C,{isLoggedIn:e.state.isLoggedIn,handleInput:e.handleInput,handleLogIn:e.handleLogIn})}}))))}}]),t}(a.Component),x=Object(f.a)(w);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(c.a,null,o.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.f0742c04.chunk.js.map